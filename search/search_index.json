{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"API REST com FastAPI e PostgreSQL","text":"<p>Bem-vindo \u00e0 documenta\u00e7\u00e3o da API REST constru\u00edda com FastAPI e PostgreSQL. Esta documenta\u00e7\u00e3o fornece informa\u00e7\u00f5es sobre como usar a API e seus endpoints.</p>"},{"location":"#visao-geral","title":"Vis\u00e3o Geral","text":"<p>Esta API permite que os usu\u00e1rios registrem-se, fa\u00e7am login e consultem dados meteorol\u00f3gicos. A API \u00e9 constru\u00edda usando FastAPI e PostgreSQL, e \u00e9 executada em cont\u00eaineres Docker.</p>"},{"location":"#api-aberta","title":"API Aberta","text":"<p>A api est\u00e1 dispon\u00edvel em:</p> <pre><code>http://afe6a8d3a425b40739d688eb9c38c234-697055407.us-east-1.elb.amazonaws.com/docs\n</code></pre> <p>Nela, voc\u00ea pode:</p> <ul> <li> <p>Registrar um novo usu\u00e1rio:</p> <pre><code>curl -X POST http://afe6a8d3a425b40739d688eb9c38c234-697055407.us-east-1.elb.amazonaws.com/registrar -d '{\"nome\": \"teste\", \"email\": \"teste@teste.com\", \"senha\": \"teste\"}'\n</code></pre> </li> <li> <p>Fazer login:</p> <pre><code>curl -X POST http://afe6a8d3a425b40739d688eb9c38c234-697055407.us-east-1.elb.amazonaws.com/login -d '{\"email\": \"teste@teste.com\", \"senha\": \"teste\"}'\n</code></pre> </li> <li> <p>Consultar dados meteorol\u00f3gicos:</p> <pre><code>curl -X GET http://afe6a8d3a425b40739d688eb9c38c234-697055407.us-east-1.elb.amazonaws.com/consultar \\\n-H 'Authorization: Bearer {token_jwt_aqui}'\n</code></pre> </li> </ul> <p>onaws.com</p>"},{"location":"#endpoints","title":"Endpoints","text":"<ul> <li>Registrar</li> <li>Login</li> <li>Consultar</li> </ul>"},{"location":"#configuracao-e-execucao","title":"Configura\u00e7\u00e3o e Execu\u00e7\u00e3o","text":""},{"location":"#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<ul> <li>Docker</li> <li>Docker Compose</li> </ul>"},{"location":"#passos-para-executar-o-projeto","title":"Passos para executar o projeto","text":"<ol> <li> <p>Baixe o docker compose aqui:</p> <p>Baixar Arquivo</p> <p></p> </li> <li> <p>Rode o comando</p> <pre><code>docker-compose up -d\n</code></pre> </li> <li> <p>Accesse a documenta\u00e7\u00e3o da API em:</p> </li> </ol> <p><code>http://localhost:8000/docs</code></p> <p></p>"},{"location":"#como-usar-a-api","title":"Como Usar a API","text":""},{"location":"#pelo-terminal","title":"Pelo terminal","text":"<p>Para acessar a API pelo terminal, voc\u00ea pode usar o comando <code>curl</code>. Aqui est\u00e3o alguns exemplos de como usar a API:</p> <ul> <li> <p>Registrar um novo usu\u00e1rio:</p> <pre><code>curl -X POST http://localhost:8000/registrar -d '{\"nome\": \"teste\", \"email\": \"teste@teste.com\", \"senha\": \"teste\"}'\n</code></pre> </li> <li> <p>Fazer login:</p> <pre><code>curl -X POST http://localhost:8000/login -d '{\"email\": \"teste@teste.com\", \"senha\": \"teste\"}'\n</code></pre> </li> <li> <p>Consultar dados meteorol\u00f3gicos:</p> <pre><code>curl -X GET http://localhost:8000/consultar \\\n-H 'Authorization: Bearer {token_jwt_aqui}'\n</code></pre> </li> </ul>"},{"location":"#pela-documentacao","title":"Pela documenta\u00e7\u00e3o","text":"<p>A aplica\u00e7\u00e3o possui uma documenta\u00e7\u00e3o interativa que pode ser acessada em <code>http://localhost:8000/docs</code>. A documenta\u00e7\u00e3o permite que voc\u00ea teste os endpoints da API e veja exemplos de requisi\u00e7\u00f5es e respostas.</p>"},{"location":"#exemplo-do-funcionamento","title":"Exemplo do funcionamento","text":""},{"location":"AWS/","title":"Deploy da aplica\u00e7\u00e3o no AWS","text":"<p>Foi realizado o deploy da aplica\u00e7\u00e3o no AWS. A api est\u00e1 dispon\u00edvel em https://apirest.fernandoa.dev/docs</p> Caso o link quebre <p>Existe uma possibilidade do link acima n\u00e3o funcionar (culpa da cloudflare), caso isso aconte\u00e7a, o servi\u00e7o tamb\u00e9m est\u00e1 dispon\u00edvel aqui</p> <p>A aplica\u00e7\u00e3o foi hospedada em um cluster EKS (Elastic Kubernetes Service) e est\u00e1 dispon\u00edvel em um Load Balancer. A documenta\u00e7\u00e3o foi gerada automaticamente pelo FastAPI e est\u00e1 dispon\u00edvel no endpoint <code>/docs</code>.</p> <p></p>"},{"location":"AWS/#realizacao-do-deploy","title":"Realiza\u00e7\u00e3o do Deploy","text":"<p>Para realizar o deploy da aplica\u00e7\u00e3o no AWS, foi necess\u00e1rio seguir os seguintes passos (Ap\u00f3s estar logado no AWS CLI):</p> <ul> <li>Criar um cluster EKS:</li> </ul> <pre><code>eksctl create cluster --name fastapi-cluster --region us-east-1 --nodes 2\n</code></pre> <ul> <li>Configurar o kubectl para acessar o cluster:</li> </ul> <pre><code>aws eks --region us-east-1 update-kubeconfig --name fastapi-cluster\n</code></pre> <ul> <li>Criar um arquivo <code>db-deployment.yaml</code> com as configura\u00e7\u00f5es do deployment para a base de dados:</li> </ul> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: postgres\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: postgres\n  template:\n    metadata:\n      labels:\n        app: postgres\n    spec:\n      containers:\n      - name: postgres\n        image: postgres:13\n        env:\n          - name: POSTGRES_USER\n            value: \"user\"\n          - name: POSTGRES_PASSWORD\n            value: \"password\"\n          - name: POSTGRES_DB\n            value: \"dbname\"\n        ports:\n          - containerPort: 5432\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: postgres\nspec:\n  ports:\n    - port: 5432\n  selector:\n    app: postgres\n</code></pre> <ul> <li>Criar um arquivo <code>web-deployment.yaml</code> com as configura\u00e7\u00f5es do deployment para a aplica\u00e7\u00e3o:</li> </ul> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: fastapi\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: fastapi\n  template:\n    metadata:\n      labels:\n        app: fastapi\n    spec:\n      containers:\n      - name: fastapi\n        image: fernandoalzueta/apirest:web\n        env:\n          - name: DATABASE_URL\n            value: \"postgresql://user:password@postgres:5432/dbname\"\n        ports:\n          - containerPort: 8000\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: fastapi-service\nspec:\n  type: LoadBalancer\n  ports:\n    - port: 80\n      targetPort: 8000\n  selector:\n    app: fastapi\n</code></pre> <ul> <li>Aplicar os deployments no cluster:</li> </ul> <pre><code>kubectl apply -f db-deployment.yml\nkubectl apply -f web-deployment.yml\n</code></pre> <ul> <li>Acessar a aplica\u00e7\u00e3o no Load Balancer:</li> </ul> <pre><code>kubectl get svc fastapi-service\n</code></pre>"},{"location":"consultar/","title":"Endpoint: Registrar","text":""},{"location":"consultar/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Registra um novo usu\u00e1rio na aplica\u00e7\u00e3o.</p>"},{"location":"consultar/#url","title":"URL","text":"<p><code>/registrar</code></p>"},{"location":"consultar/#metodo-http","title":"M\u00e9todo HTTP","text":"<p><code>POST</code></p>"},{"location":"consultar/#parametros","title":"Par\u00e2metros","text":"<ul> <li><code>nome</code>: Nome do usu\u00e1rio (string)</li> <li><code>email</code>: Email do usu\u00e1rio (string)</li> <li><code>senha</code>: Senha do usu\u00e1rio (string)</li> </ul>"},{"location":"consultar/#exemplo-de-requisicao","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>{\n    \"nome\": \"Disciplina Cloud\",\n    \"email\": \"cloud@insper.edu.br\",\n    \"senha\": \"cloud0\"\n}\n</code></pre>"},{"location":"consultar/#exemplo-de-resposta","title":"Exemplo de Resposta","text":"<pre><code>{\n    \"jwt\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkRpc2NpcGxpbmEgQ2xvdWQiLCJpYXQiOjE1MTYyMzkwMjJ9.s76o9X4UIANSI-aTF8UhqnBYyIRWw_WH4ut8Xqmo6i0\"\n}\n</code></pre>"},{"location":"consultar/#gif-do-funcionamento","title":"Gif do funcionamento","text":""},{"location":"login/","title":"Endpoint: Login","text":""},{"location":"login/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Autentica um usu\u00e1rio na aplica\u00e7\u00e3o.</p>"},{"location":"login/#url","title":"URL","text":"<p><code>/login</code></p>"},{"location":"login/#metodo-http","title":"M\u00e9todo HTTP","text":"<p><code>POST</code></p>"},{"location":"login/#parametros","title":"Par\u00e2metros","text":"<ul> <li><code>email</code>: Email do usu\u00e1rio (string)</li> <li><code>senha</code>: Senha do usu\u00e1rio (string)</li> </ul>"},{"location":"login/#exemplo-de-requisicao","title":"Exemplo de Requisi\u00e7\u00e3o","text":"<pre><code>{\n    \"email\": \"cloud@insper.edu.br\",\n    \"senha\": \"cloud0\"\n}\n</code></pre>"},{"location":"login/#exemplo-de-resposta","title":"Exemplo de Resposta","text":"<pre><code>{\n    \"jwt\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.\n            eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkRpc2N\n            pcGxpbmEgQ2xvdWQiLCJpYXQiOjE1MTYyMzkwMjJ9.\n            s76o9X4UIANSI-aTF8UhqnBYyIRWw_WH4ut8Xqmo6i0\"\n}\n</code></pre>"},{"location":"login/#gif-do-funcionamento","title":"GIF do funcionamento","text":"<p> 1</p>"},{"location":"registrar/","title":"Endpoint: Consultar","text":""},{"location":"registrar/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Consulta dados meteorol\u00f3gicos (requer autentica\u00e7\u00e3o).</p>"},{"location":"registrar/#url","title":"URL","text":"<p><code>/consultar</code></p>"},{"location":"registrar/#metodo-http","title":"M\u00e9todo HTTP","text":"<p><code>GET</code></p>"},{"location":"registrar/#cabecalhos","title":"Cabe\u00e7alhos","text":"<ul> <li><code>Authorization</code>: Bearer token_jwt_aqui</li> </ul>"},{"location":"registrar/#exemplo-de-resposta","title":"Exemplo de Resposta","text":"<pre><code>{\n  \"latitude\": -46.67,\n  \"longitude\": -23.59,\n  \"timezone\": \"America/Sao_Paulo\",\n  \"current\": {\n    \"time\": \"2023-10-01T00:00:00Z\",\n    \"temperature_2m\": 25.0,\n    \"wind_speed_10m\": 5.0\n  },\n  \"hourly\": [\n    {\n      \"time\": \"2023-10-01T01:00:00Z\",\n      \"temperature_2m\": 24.0\n    },\n    {\n      \"time\": \"2023-10-01T02:00:00Z\",\n      \"temperature_2m\": 23.0\n    }\n  ]\n}\n</code></pre>"},{"location":"registrar/#gif-do-funcionamento","title":"GIF do funcionamento","text":""}]}